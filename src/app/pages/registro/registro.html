<div class="auth-container">
    <div class="auth-card">
    
    <div class="auth-header">
        <h1>Crear Cuenta</h1>
        <p>Regístrate para comenzar a gestionar tus notas.</p>
    </div>

    <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
        <label>Correo Electrónico</label>
        <input 
            type="email" 
            formControlName="email"
            placeholder="nombre@ejemplo.com"
            [class.input-error]="isFieldInvalid('email')"
        >
        @if (isFieldInvalid('email')) {
            <span class="error-msg">
            @if (registroForm.get('email')?.hasError('required')) { El correo es obligatorio }
            @else if (registroForm.get('email')?.hasError('email')) { Correo inválido }
            </span>
        }
        </div>

    <div class="form-group">
        <label>Contraseña</label>
        <input 
            type="password" 
            formControlName="password"
            placeholder="••••••••"
            [class.input-error]="isFieldInvalid('password')"
        >
        @if (isFieldInvalid('password')) {
            <span class="error-msg">
            @if (registroForm.get('password')?.hasError('required')) { La contraseña es obligatoria }
            @else if (registroForm.get('password')?.hasError('minlength')) { Mínimo 6 caracteres }
            </span>
        }
    </div>

    <div class="form-group">
        <label>Confirmar Contraseña</label>
        <input 
            type="password" 
            formControlName="confirmarPassword"
            placeholder="••••••••"
            [class.input-error]="isFieldInvalid('confirmarPassword')"
        >
        @if (registroForm.get('confirmarPassword')?.hasError('noCoinciden') && registroForm.get('confirmarPassword')?.touched) {
            <span class="error-msg">Las contraseñas no coinciden</span>
        }
    </div>

        @if (errorMessage) {
        <div class="alert-error">
            {{ errorMessage }}
        </div>
        }

        <button type="submit" class="btn-primary" [disabled]="isLoading || registroForm.invalid">
        {{ isLoading ? 'Creando cuenta...' : 'Registrarse' }}
        </button>

        <p class="auth-link">
        ¿Ya tienes cuenta? <a routerLink="/login">Entrar</a>
        </p>

    </form>
    </div>
</div>